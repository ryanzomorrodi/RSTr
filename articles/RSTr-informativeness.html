<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>06: Model Informativeness • RSTr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="06: Model Informativeness">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RSTr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/RSTr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/RSTr-event.html">01: Understanding and Preparing Your Event Data</a></li>
    <li><a class="dropdown-item" href="../articles/RSTr-adjacency.html">02: Understanding and Preparing Your Adjacency Structure</a></li>
    <li><a class="dropdown-item" href="../articles/RSTr-car.html">03: The CAR Models</a></li>
    <li><a class="dropdown-item" href="../articles/RSTr-agestandardize.html">04: Generating Estimates: Age-standardization</a></li>
    <li><a class="dropdown-item" href="../articles/RSTr-reliability.html">05: Generating Estimates: Reliability and Suppression</a></li>
    <li><a class="dropdown-item" href="../articles/RSTr-informativeness.html">06: Model Informativeness</a></li>
    <li><a class="dropdown-item" href="../articles/RSTr-samples.html">07: Sample Processing</a></li>
    <li><a class="dropdown-item" href="../articles/RSTr-initialvalues.html">08: Initial Values</a></li>
    <li><a class="dropdown-item" href="../articles/RSTr-priors.html">09: Priors</a></li>
    <li><a class="dropdown-item" href="../articles/RSTr-models.html">Appendix A: The CAR Hierarchical Models</a></li>
    <li><a class="dropdown-item" href="../articles/RSTr-troubleshoot.html">Appendix B: Troubleshooting</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>06: Model Informativeness</h1>
            
      

      <div class="d-none name"><code>RSTr-informativeness.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Up to this point, we’ve discussed preparing count/adjacency data,
model setup, and age-standardization. In
<code><a href="../articles/RSTr-reliability.html">vignette("RSTr-reliability")</a></code>, we discussed how to suppress
estimates based on reliability criteria, including population thresholds
and relative precision. However, there are cases where the event or
population counts are too low for RSTr to meaningfully gather
information from neighboring regions; in these cases, the standard BYM
models will apply excessive spatial smoothing, artificially inflating
the estimate’s relative precision. In this vignette, we will look under
the hood of the CAR models and how they perform spatial smoothing,
discuss model informativeness, and how to work with restricted models in
your data.</p>
</div>
<div class="section level2">
<h2 id="how-does-spatial-smoothing-work">How does spatial smoothing work?<a class="anchor" aria-label="anchor" href="#how-does-spatial-smoothing-work"></a>
</h2>
<p>Spatial smoothing acts by way of a spatial random effects estimator
<code>Z</code>; this is essentially the parameter that tells the model
how much to either increase or decrease its corresponding estimated rate
<code>lambda</code>. In CAR models, the strength of <code>Z</code>
itself is determined by a host of factors, most importantly the spatial
variance (<code>sig2</code> for UCAR; <code>G</code> for MCAR and
MSTCAR). We can investigate spatial smoothing further by running a UCAR
model to see the evolution of <code>Z</code> over time:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_u</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">miheart</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">[</span>, <span class="st">"55-64"</span>, <span class="st">"1979"</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">mod_ucar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ucar.html">ucar</a></span><span class="op">(</span><span class="st">"my_test_model"</span>, <span class="va">data_u</span>, <span class="va">miadj</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, seed <span class="op">=</span> <span class="fl">1234</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting sampler on Batch 1 at Thu Dec 11 00:06:14</span></span></code></pre></div>
<p><img src="RSTr-informativeness_files/figure-html/unnamed-chunk-2-1.png" class="r-plt" width="700"></p>
<pre><code><span><span class="co">#&gt; Generating estimates...</span></span>
<span><span class="co">#&gt; Model finished at Thu Dec 11 00:06:21</span></span></code></pre>
<p>The magnitude of <code>sig2</code> has further implications on the
rate estimates <code>lambda</code>. Smaller <code>sig2</code> values
mean that the variance between neighbors is also smaller. In short, the
smaller the <code>sig2</code>, the closer in value an estimate and its
neighbors will be. When combined with the comparatively intense
smoothing applied to smaller event/population regions, these
unrestricted CAR models will work too hard to fill in the gaps in
information, not only pushing the estimate value too close to the mean
<code>beta</code> but also artificially inflating its relative
precision.</p>
<p>In unrestricted CAR models, oversmoothing is partially addressed by
imposing an additional reliability criterion of either a population or
event threshold. If an estimate has a relative precision greater than 1,
we can still mark it as unreliable if this threshold is too small. We
can investigate this over all of our datapoints by comparing the event
counts to their corresponding relative precisions:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estimates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_estimates.html">get_estimates</a></span><span class="op">(</span><span class="va">mod_ucar</span><span class="op">)</span></span>
<span><span class="va">estimates_supp</span> <span class="op">&lt;-</span> <span class="va">estimates</span><span class="op">[</span><span class="va">estimates</span><span class="op">$</span><span class="va">relative_precision</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">estimates</span><span class="op">$</span><span class="va">events</span> <span class="op">&lt;</span> <span class="fl">10</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">estimates</span><span class="op">$</span><span class="va">events</span>, <span class="va">estimates</span><span class="op">$</span><span class="va">relative_precision</span>, xlab <span class="op">=</span> <span class="st">"Events"</span>, ylab <span class="op">=</span> <span class="st">"Relative Precision"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">estimates_supp</span><span class="op">$</span><span class="va">events</span>, <span class="va">estimates_supp</span><span class="op">$</span><span class="va">relative_precision</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>h <span class="op">=</span> <span class="fl">1</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>v <span class="op">=</span> <span class="fl">10</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></code></pre></div>
<p><img src="RSTr-informativeness_files/figure-html/unnamed-chunk-3-1.png" class="r-plt" width="700"></p>
<p>The horizontal blue line shows the relative precision cutoff, and the
vertical blue line shows an event cutoff based on the suppression
criteria currently used by CDC WONDER (event counts less than 10 are
suppressed for privacy reasons). Red datapoints are below the population
threshold but above the relative precision threshold.</p>
<p>This plot showcases the intense oversmoothing done by the UCAR model
in small-event areas. Several regions with less than 10 events (25, or
30% of our regions) have relative precisions well over the necessary
threshold for reliability, despite having low event counts. Hence, we
impose a threshold to prevent these estimates from being marked as
reliable. However, this only fixes part of the problem: relative
precisions will still be artificially inflated throughout our
non-suppressed estimates, even if to a lesser degree. To address this
issue, we need to stop the oversmoothing in the first place by placing a
limit on model informativeness.</p>
</div>
<div class="section level2">
<h2 id="model-informativeness">Model informativeness<a class="anchor" aria-label="anchor" href="#model-informativeness"></a>
</h2>
<p>Effectively, model informativeness quantifies the amount of
‘artificial events’ added to the model through spatial smoothing. In our
example above, this resulted in 25 regions which had a sufficiently high
number of events added through oversmoothing to over-inflate their
relative precision.</p>
<p>The UCAR model’s informativeness, <code>a0</code>, is determined by a
mix of the spatial variance <code>sig2</code>, the non-spatial variance
<code>tau2</code>, and the mean region rate <code>beta</code> for
Binomially-distributed likelihoods. For Poisson-distributed likelihoods,
only <code>sig2</code> and <code>tau2</code> determine
informativeness.</p>
</div>
<div class="section level2">
<h2 id="the-enhanced-ucar-eucar-model">The Enhanced UCAR (EUCAR) model<a class="anchor" aria-label="anchor" href="#the-enhanced-ucar-eucar-model"></a>
</h2>
<p><code>RSTr</code> features unrestricted UCAR/MCAR/MSTCAR models, but
also features an enhanced UCAR (EUCAR) model which incorporates measures
to prevent oversmoothing. With the EUCAR model, we can limit our
informativeness <code>a0</code> to a ceiling, <code>A</code>, by
tweaking the estimation process of <code>sig2</code>, <code>tau2</code>,
and <code>beta</code>. This will ensure that our spatial smoothing does
not contribute more than <code>A</code> events to any estimate in our
model. There is an additional <code>m0</code> parameter which defines a
baseline number of neighbors per region. Consequently, our
spatial/non-spatial variances will increase and our over-smoothing will
be appropriately attenuated; this will permit the model to allow more
pronounced differences between neighboring regions. Most importantly,
this gives us a happy medium between no smoothing in our crude estimates
and oversmoothing caused by unrestricted CAR models.</p>
<p><a href="https://www.sciencedirect.com/science/article/pii/S1877584521000198" class="external-link">Quick
et al. 2021</a> suggests an informativeness ceiling <code>A</code> of 6
and an <code>m0</code> of 3 to ensure that regions with event counts
less than 10 will not erroneously generate precise estimates.
<code>RSTr</code> sets <code>A</code> to 6 and <code>m0</code> to 3 by
default.</p>
<p>Let’s run an EUCAR model using the <code><a href="../reference/ucar.html">eucar()</a></code> function,
setting an informativeness ceiling of <code>A = 6</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_eucar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ucar.html">eucar</a></span><span class="op">(</span><span class="st">"my_test_model"</span>, <span class="va">data_u</span>, <span class="va">miadj</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, seed <span class="op">=</span> <span class="fl">1234</span>, A <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting sampler on Batch 1 at Thu Dec 11 00:06:21</span></span></code></pre></div>
<p><img src="RSTr-informativeness_files/figure-html/unnamed-chunk-4-1.png" class="r-plt" width="700"></p>
<pre><code><span><span class="co">#&gt; Generating estimates...</span></span>
<span><span class="co">#&gt; Model finished at Thu Dec 11 00:06:28</span></span></code></pre>
<p>Notice that the traceplots for <code>tau2</code> and
<code>sig2</code> in our enhanced (i.e., restricted) UCAR model have
significantly higher values than those in the unrestricted UCAR model.
This is due to the EUCAR model ‘blocking’ lower values and ensuring that
regions don’t oversmooth. We can directly compare the two sets of
results with another relative precision plot:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estimates_eucar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_estimates.html">get_estimates</a></span><span class="op">(</span><span class="va">mod_eucar</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">estimates_eucar</span><span class="op">$</span><span class="va">events</span>, <span class="va">estimates_eucar</span><span class="op">$</span><span class="va">relative_precision</span>, xlab <span class="op">=</span> <span class="st">"Events"</span>, ylab <span class="op">=</span> <span class="st">"Relative Precision"</span>, col <span class="op">=</span> <span class="st">"purple"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">estimates</span><span class="op">$</span><span class="va">events</span>, <span class="va">estimates</span><span class="op">$</span><span class="va">relative_precision</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>h <span class="op">=</span> <span class="fl">1</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span>v <span class="op">=</span> <span class="fl">10</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></code></pre></div>
<p><img src="RSTr-informativeness_files/figure-html/unnamed-chunk-5-1.png" class="r-plt" width="700"></p>
<p>Here, the estimates for the EUCAR are in purple and the estimates for
the unrestricted UCAR are in black. Notice how the points on the purple
curve stay below the black curve at low event counts and that no purple
points enter the high-precision, low-event quadrant. With
<code>A = 6</code>, the points lie below 1 relative precision until
events are greater than 10, meaning this informativeness ceiling is
smoothing an ideal amount. We can also map the two estimates to visually
compare the models:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mishp</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">estimates</span><span class="op">$</span><span class="va">medians</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Spatially Smoothed Estimates, Unrestricted UCAR Model"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Deaths per 100,000"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="RSTr-informativeness_files/figure-html/unnamed-chunk-6-1.png" class="r-plt" width="700"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mishp</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">estimates_eucar</span><span class="op">$</span><span class="va">medians</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Spatially Smoothed Estimates, EUCAR Model"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Deaths per 100,000"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="RSTr-informativeness_files/figure-html/unnamed-chunk-6-2.png" class="r-plt" width="700"></p>
<p>As expected, the gradient of estimates is much more sharp on the
EUCAR model map in comparison to the unrestricted UCAR map. This is due
to the decreased intensity of our spatial smoothing. Additionally, the
spread of estimates for the EUCAR model is wider than that of the
unrestricted UCAR model because of its increased spatial variance.</p>
</div>
<div class="section level2">
<h2 id="enhanced-models-and-age-standardization">Enhanced models and age-standardization<a class="anchor" aria-label="anchor" href="#enhanced-models-and-age-standardization"></a>
</h2>
<p>When age-standardizing across a CAR model, informativeness is
cumulative: informativeness in individual rates when spatially smoothing
will compound the informativeness in estimates age-standardized by
spatially smoothed rates. Therefore, the EUCAR is an excellent choice
for modeling with age-standardization. Not only will individual
estimates not be over-smoothed, the age-standardized estimates will
benefit from enhanced reliability due to increased event counts in the
crude data.</p>
<p>We can re-run our model with three age groups: 65-74, 75-84, and 85+.
Since we are now running our models across multiple groups, we will need
to extend our <code>A</code>s to match the number of groups.
Additionally, since our informativeness measures are cumulative when
age-standardizing, we should split our <code>A = 6</code>
informativeness ceiling among all of our groups of interest. If we want,
we can weight each group’s <code>A</code> by their total events:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_u</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">miheart</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"65-74"</span>, <span class="st">"75-84"</span>, <span class="st">"85+"</span><span class="op">)</span>, <span class="st">"1988"</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fl">6</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="va">data_u</span><span class="op">$</span><span class="va">Y</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">data_u</span><span class="op">$</span><span class="va">Y</span><span class="op">)</span></span>
<span><span class="va">mod_eucar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ucar.html">eucar</a></span><span class="op">(</span><span class="st">"test_eucar"</span>, <span class="va">data_u</span>, <span class="va">miadj</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, seed <span class="op">=</span> <span class="fl">1234</span>, A <span class="op">=</span> <span class="va">A</span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting sampler on Batch 1 at Thu Dec 11 00:06:29</span></span></code></pre></div>
<p><img src="RSTr-informativeness_files/figure-html/unnamed-chunk-7-1.png" class="r-plt" width="700"></p>
<pre><code><span><span class="co">#&gt; Generating estimates...</span></span>
<span><span class="co">#&gt; Model finished at Thu Dec 11 00:06:37</span></span></code></pre>
<p>While our individual groups will have lower relative precisions due
to lower respective <code>A</code>s, when we age-standardize, we will
have the same effective smoothing power as our singular
<code>A = 6</code> restricted model:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">std_pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">68775</span>, <span class="fl">34116</span>, <span class="fl">9888</span><span class="op">)</span></span>
<span><span class="va">mod_eucar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/age_standardize.html">age_standardize</a></span><span class="op">(</span><span class="va">mod_eucar</span>, <span class="va">std_pop</span>, <span class="st">"65up"</span><span class="op">)</span></span>
<span><span class="va">est_eucar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_estimates.html">get_estimates</a></span><span class="op">(</span><span class="va">mod_eucar</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mishp</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">est_eucar</span><span class="op">$</span><span class="va">medians</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Age-Standardized Spatially Smoothed Estimates, EUCAR Model"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Deaths per 100,000"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="RSTr-informativeness_files/figure-html/unnamed-chunk-8-1.png" class="r-plt" width="700"></p>
</div>
<div class="section level2">
<h2 id="the-eucar-model-reliability-and-suppression">The EUCAR Model, Reliability, and Suppression<a class="anchor" aria-label="anchor" href="#the-eucar-model-reliability-and-suppression"></a>
</h2>
<p>Remember that for unrestricted CAR models, we have to impose an
additional event/population threshold for reliability to capture
high-precision estimates in low-event areas. As we saw in the
event/relative precision plot, these thresholds are no longer necessary
when we suppress our estimates with an EUCAR model:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_eucar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/suppress_estimates.html">suppress_estimates</a></span><span class="op">(</span><span class="va">mod_eucar</span><span class="op">)</span></span>
<span><span class="va">est_eucar</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_estimates.html">get_estimates</a></span><span class="op">(</span><span class="va">mod_eucar</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mishp</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">est_eucar</span><span class="op">$</span><span class="va">medians_suppressed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Spatially Smoothed Estimates, EUCAR Model"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Deaths per 100,000"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="RSTr-informativeness_files/figure-html/unnamed-chunk-9-1.png" class="r-plt" width="700"></p>
<p>With the EUCAR model, we get the benefit of age-standardizing our
spatially smoothed estimates without the compounded oversmoothing from
unrestricted models.</p>
</div>
<div class="section level2">
<h2 id="choosing-between-enhanced-vs-unrestricted-models">Choosing between enhanced vs unrestricted models<a class="anchor" aria-label="anchor" href="#choosing-between-enhanced-vs-unrestricted-models"></a>
</h2>
<p>Now that we’ve elucidated the benefits of using enhanced models, we
can work through the most appropriate use case for each model:</p>
<ul>
<li><p>The EUCAR model is virtually always preferred to the unrestricted
UCAR model. If you are not interested in temporal trends or group/time
interactions, the EUCAR will likely be your best option, particularly if
you are age-standardizing.</p></li>
<li><p>The MCAR model is useful if you are specifically interested in
interactions between sociodemographic groups and don’t have temporal
data.</p></li>
<li><p>The MSTCAR model is the best option when investigating
<em>linear</em> trends in temporal data or if you are specifically
interested in interactions between sociodemographic groups across time.
If your trends depict multiple behaviors, it is recommended to either
run two MSTCAR models with separate time periods for each trend or to
run concurrent EUCAR models. Note that all <code>*car()</code> functions
accept up to three-dimensional arrays and will concurrently run models
for different groups/time periods if necessary.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="future-developments">Future developments<a class="anchor" aria-label="anchor" href="#future-developments"></a>
</h2>
<p>Enhanced models for MCAR and MSTCAR continue to be under development.
Development for an enhanced Univariate Spatiotemporal CAR (USTCAR) model
is also underway. <code>RSTr</code> will incorporate these enhanced
models as they become available.</p>
</div>
<div class="section level2">
<h2 id="final-thoughts">Final thoughts<a class="anchor" aria-label="anchor" href="#final-thoughts"></a>
</h2>
<p>In this vignette, we investigated model informativeness and the
tendency of unrestricted BYM models to oversmooth estimates, along with
some benefits of enhanced CAR models. This vignette concludes the main
sections on using the functions in the <code>RSTr</code> package. After
reading these, you should be able to prepare your event and adjacency
data, choose and configure your model as necessary, age-standardize
estimates, and determine which estimates are reliable. If you are
interested in the more advanced features of the <code>RSTr</code>
involving sample processing, read <code><a href="../articles/RSTr-samples.html">vignette("RSTr-samples")</a></code>;
if you’d like more information on defining custom
<code>initial_values</code> and <code>priors</code>, check
<code><a href="../articles/RSTr-initialvalues.html">vignette("RSTr-initialvalues")</a></code> and
<code><a href="../articles/RSTr-priors.html">vignette("RSTr-priors")</a></code>, respectively; if you are
interested in learning more about how <code>RSTr</code>’s models work,
read <code><a href="../articles/RSTr-models.html">vignette("RSTr-models")</a></code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David DeLara, Centers for Disease Control and Prevention.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
